<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}
        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
    </head>
    <body>
        {% block nav %}
            <nav>
                <div>
                    <a href="">
                        <p>Prediction game</p>
                    </a>
                    <div>
                        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                            <div>
                                <ul>
                                    {% if is_granted('ROLE_PREVIOUS_ADMIN') %}
                                        <li>
                                            <a href="{{ path('app_home', {
                                                '_switch_user': '_exit'
                                            }) }}">Exit Impersonation</a>
                                        </li>
                                    {% endif %}
                                    <li>
                                        <a href="{{ path('app_logout') }}">Log Out</a>
                                    </li>
                                </ul>
                            </div>
                        {% else %}
                            <a href="{{ path('app_login') }}">Log In</a>
                            <a href="{{ path('app_register') }}">Sign up</a>
                        {% endif %}
                    </div>
                </div>
            </nav>
        {% endblock %}

        {% block sidenav %}
            <ul>
                {% for competition in competitions.competitions %}
                    <li><a href="{{ path('app_competitions', {'id': competition.id}) }}">{{ competition.name }}</a></li>
                {% endfor %}
            </ul>
        {% endblock %}
        
        {% for type, messages in app.flashes %}
            {% for message in messages %}
                    <div class="alert alert-{{ type }}">{{ message }}</div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %} 
        <footer>
            Made with <i style="color: red;" class="fa fa-heart"></i> by the guys and gals at <a style="color: #444; text-decoration: underline;" href="https://symfonycasts.com">SymfonyCasts</a>
        </footer>
    </body>
</html>